{{define "game_details"}}
<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.Game.Name}} - IGDB</title>
    <link rel="stylesheet" href="/static/css/details.css">
    <link rel="icon" type="image/png" href="/static/images/favicon.png">

</head>

<body>

    {{if .Game.Screenshots}}
    <div class="hero-background" style="background-image: url('{{(index .Game.Screenshots 0).URL}}');"></div>
    {{else}}
    <div class="hero-background" style="background-image: url('{{.Game.Cover.URL}}');"></div>
    {{end}}

    <header class="details-header">
        <a href="/" class="logo">IGDB</a>
        <nav>
            <a href="/">Accueil</a>
            <a href="/level5">Level-5</a>
            <a href="/nintendo">Nintendo</a>
            <a href="/sega">SEGA</a>
            <a href="/ubisoft">Ubisoft</a>
            <a href="/favorites">Favoris</a>
        </nav>
        <form action="/search" method="get" class="search-form">
            <input type="text" name="query" placeholder="Rechercher un jeu..." class="search-input">
            <button type="submit" class="search-btn">üîç</button>
        </form>
    </header>

    <main class="details-container">
        <div class="game-hero">
            <div class="cover-section">
                <img src="{{.Game.Cover.URL}}" alt="{{.Game.Name}}" class="game-cover">


                <span class="type-badge 
                    {{if eq .Game.Category 0}}badge-game{{end}}
                    {{if eq .Game.Category 1}}badge-dlc{{end}}
                    {{if eq .Game.Category 2}}badge-expansion{{end}}
                    {{if eq .Game.Category 3}}badge-bundle{{end}}
                    {{if eq .Game.Category 4}}badge-standalone{{end}}
                ">
                    {{if eq .Game.Category 0}}Jeu{{end}}
                    {{if eq .Game.Category 1}}DLC{{end}}
                    {{if eq .Game.Category 2}}Extension{{end}}
                    {{if eq .Game.Category 3}}Bundle{{end}}
                    {{if eq .Game.Category 4}}Standalone{{end}}
                </span>
            </div>

            <div class="info-section">
                <h1 class="game-title">{{.Game.Name}}</h1>

                {{if .Game.Rating}}
                <div class="rating-box">
                    <span class="rating-value">{{printf "%.0f" .Game.Rating}}</span>
                    <span class="rating-label">Note des joueurs</span>
                </div>
                {{end}}

                {{if .Game.Genres}}
                <div class="genres">
                    {{range .Game.Genres}}
                    <span class="genre-tag">{{.Name}}</span>
                    {{end}}
                </div>
                {{end}}

                {{if .Game.Platforms}}
                <div class="platforms">
                    <h4>Plateformes disponibles</h4>
                    <div class="platform-list">
                        {{range .Game.Platforms}}
                        <span class="platform-tag">{{.Name}}</span>
                        {{end}}
                    </div>
                </div>
                {{end}}

                {{if $.IsFavorite}}
                <form action="/favorites/remove" method="POST" style="display: inline;">
                    <input type="hidden" name="id" value="{{.Game.ID}}">
                    <input type="hidden" name="type" value="game">
                    <button type="submit" class="fav-btn fav-active" title="Retirer des favoris"> Retirer des
                        favoris</button>
                </form>
                {{else}}
                <form action="/favorites/add" method="POST" style="display: inline;">
                    <input type="hidden" name="id" value="{{.Game.ID}}">
                    <input type="hidden" name="type" value="game">
                    <input type="hidden" name="name" value="{{.Game.Name}}">
                    <input type="hidden" name="image" value="{{.Game.Cover.URL}}">
                    <button type="submit" class="fav-btn" title="Ajouter aux favoris"> Ajouter aux favoris</button>
                </form>
                {{end}}

                <button class="back-btn" onclick="history.back()">‚Üê Retour</button>
            </div>
        </div>

        <div class="game-content">
            {{if .Game.Summary}}
            <section class="description-section">
                <h2>Description</h2>
                <p>{{.Game.Summary}}</p>
            </section>
            {{end}}

            {{if .Game.Storyline}}
            <section class="storyline-section">
                <h2>Histoire</h2>
                <p>{{.Game.Storyline}}</p>
            </section>
            {{end}}

            {{if .Game.Screenshots}}
            <section class="screenshots-section">
                <h2>Captures d'√©cran</h2>
                <div class="screenshots-grid">
                    {{range .Game.Screenshots}}
                    <div class="screenshot-item">
                        <img src="{{.URL}}" alt="Screenshot" loading="lazy">
                    </div>
                    {{end}}
                </div>
            </section>
            {{end}}

            {{if .DLCs}}
            <section class="dlc-section">
                <h2>Contenus additionnels ({{len .DLCs}})</h2>
                <div class="dlc-grid">
                    {{range .DLCs}}
                    <a href="/game?id={{.ID}}" class="dlc-card">
                        <img src="{{.Cover.URL}}" alt="{{.Name}}">
                        <div class="dlc-info">
                            <h4>{{.Name}}</h4>
                            <span class="dlc-badge">
                                {{if eq .Category 1}}DLC{{end}}
                                {{if eq .Category 2}}Extension{{end}}
                                {{if eq .Category 3}}Bundle{{end}}
                            </span>
                        </div>
                    </a>
                    {{end}}
                </div>
            </section>
            {{end}}
        </div>
    </main>

    <footer>
        <p>¬© 2026 IGDB - Groupie Tracker</p>
    </footer>
</body>

</html>
{{end}}